{% load static %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>اطلاعات من</title>

  <link rel="stylesheet" href="{% static 'css/output.css' %}" />
  <link rel="stylesheet" href="{% static 'css/font.css' %}">

  <style>
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .swal2-styled {
      color: black !important;
    }
  </style>

</head>

<body class="bg-gray-50">
  <!-- NAVBAR -->
  <div>
    <!-- TOP -->
    {% include 'includes/head.html' %}
    <!-- OPACITY SCREEN FOR SEARCH INPUT FOCUS -->
    <div class="absolute w-full h-screen bg-gray-200 opacity-40 z-40 hidden" id="opacitiScreen" onclick="closeScreen()">
    </div>
  </div>

  <form action="" method="POST" class="change-password-form">
    {% csrf_token %}
    <!-- MAIN -->
    {% include 'includes/profile_navbar.html' %}

    <div class="md:w-8/12 lg:w-9/12 flex flex-col gap-y-5">
      <div class="border rounded-3xl shadow-lg flex flex-col p-5 gap-y-5">
        <div class="sm:grid grid-cols-2 gap-x-5">



          <div class="mb-4">
            <label for="username" class="inline-block mb-2 ml-1 font-semibold text-xs text-slate-700">رمز عبور فعلی</label>
            {{ form.old_password }}
            {% if form.old_password.errors %}
            <div class="flex items-center gap-2 text-red-600 text-sm mt-1">
              <i class="bi bi-exclamation-circle-fill"></i>
              <ul class="list-none m-0 p-0">
                {% for error in form.old_password.errors %}
                <li>{{ error }}</li>
                {% endfor %}
              </ul>
            </div>
            {% endif %}
          </div>



          <div class="mb-4">
            <label for="username" class="inline-block mb-2 ml-1 font-semibold text-xs text-slate-700">رمز عبور جدید</label>
            {{ form.new_password }}
             {% if form.new_password.errors %}
                    <div class="flex items-center gap-2 text-red-600 text-sm mt-1">
                        <i class="bi bi-exclamation-circle-fill"></i>
                        <ul class="list-none m-0 p-0">
                            {% for error in form.new_password.errors %}
                                <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}
          </div>



          <div class="mb-4">
            <label for="username" class="inline-block mb-2 ml-1 font-semibold text-xs text-slate-700">تکرار رمز عبورجدید</label>
            {{ form.confirm_new_password }}
             {% if form.confirm_new_password.errors %}
                    <div class="flex items-center gap-2 text-red-600 text-sm mt-1">
                        <i class="bi bi-exclamation-circle-fill"></i>
                        <ul class="list-none m-0 p-0">
                            {% for error in form.confirm_new_password.errors %}
                                <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}
                
                {% if form.non_field_errors %}
                    <div class="flex items-center gap-2 text-red-600 text-sm mt-1">
                        <i class="bi bi-exclamation-circle-fill"></i>
                        <ul class="list-none m-0 p-0">
                            {% for error in form.non_field_errors %}
                                <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}
            

          </div>
          <div class="flex items-center pt-7 h-16">
          </div>
        </div>
        <span class="opacity-90">
          <button
            class="px-7 py-2 text-center text-white bg-blue-500 align-middle border-0 rounded-lg shadow-md text-sm">تغییر
            رمز عبور</button>
        </span>
        
      </div>
    </div>
    </div>
    </div>
    </div>
  </form>
  <!-- FOOTER -->
  {% include 'includes/footer.html' %}
</body>
<!--DROPDOWNS FOR NAVBAR-->
<script src="https://unpkg.com/@themesberg/flowbite@1.1.1/dist/flowbite.bundle.js"></script>
<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.js" defer>
</script>
<!--MOBILE NAVBAR-->
<script src="{% static 'js/navbar.js' %}"></script>
<!-- SHOW MODAL SEARCH -->
<script src="{% static 'js/searchBox.js' %}"></script>

<!-- SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<!-- animate.css-->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css">
<!-- animate.css-->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css">

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const form = document.querySelector(".change-password-form");
    form.addEventListener("submit", function(e) {
      e.preventDefault();
      Swal.fire({
        title: 'تغییر رمز عبور',
        text: 'آیا از اعمال این تغییر مطمئن هستید؟',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'بله، تغییر شود',
        cancelButtonText: 'انصراف',
        confirmButtonColor: '#e74c3c',
        cancelButtonColor: '#46A9AE',
        background: '#ffffff',
        showClass: {
          popup: 'animate__animated animate__fadeInDown'
        },
        hideClass: {
          popup: 'animate__animated animate__fadeOutUp'
        }
      }).then((result) => {
        if (result.isConfirmed) {
          form.submit();
        }
      });
    });
  });
</script>

</html>