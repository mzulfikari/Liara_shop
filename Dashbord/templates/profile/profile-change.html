{% load static %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>اطلاعات من</title>

  <link rel="stylesheet" href="{% static 'css/output.css' %}" />
  <link rel="stylesheet" href="{% static 'css/font.css' %}">

  <style>
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    .hidden-text {
        display: none;
    }

    .swal2-styled {
            color: black !important;
        }
    .delete-btn {
      width: 44px;
      height: 44px;
      border: 1px solid #D1D5DB;
      background-color: #fff;
      border-radius: 50%;
      transition: background-color 0.2s ease;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      margin-right: 0.5rem;
    }

    .delete-btn:hover {
      background-color: #fee2e2;
    }

    .delete-icon {
      width: 24px;
      height: 24px;
      color: #f87171;
      position: absolute;
      left: 8px;
      transition: color 0.2s ease;
      z-index: 10;
    }

    .delete-btn:hover .delete-icon {
      color: #dc2626;
    }

    .upload-icon {
      width: 24px;
      height: 24px;
      color: #6B7280;
    }
  
  </style>
  

</head>

<body class="bg-gray-50">
  <!-- NAVBAR -->
  <div>
    <!-- TOP -->
    {% include 'includes/head.html' %}
    <!-- OPACITY SCREEN FOR SEARCH INPUT FOCUS -->
    <div class="absolute w-full h-screen bg-gray-200 opacity-40 z-40 hidden" id="opacitiScreen" onclick="closeScreen()">
    </div>
  </div>
  <!-- MAIN -->
  {% include 'includes/profile_navbar.html' %}
  
  <div class="md:w-8/12 lg:w-9/12 flex flex-col gap-y-5">
    <div class="border rounded-3xl shadow-lg flex flex-col p-5 gap-y-5">
      <div class="sm:grid grid-cols-2 gap-x-5">
        <div class="mb-4">

      <form  method="post" id="edit-user" enctype="multipart/form-data" >
            {% csrf_token %}
        <label for="username" class="inline-block mb-2 ml-1 font-semibold text-xs text-slate-700">نام :</label>
          {{ form.first_name }}

        </div>

        <div class="mb-4">

          <label for="username" class="inline-block mb-2 ml-1 font-semibold text-xs text-slate-700">نام خانوادگی
            :</label>
          {{ form.last_name }}

        </div>

        <div class="mb-4">

          <label for="username" class="inline-block mb-2 ml-1 font-semibold text-xs text-slate-700">شماره همراه
            :</label>
          {{ form.phone }}
        </div>

        <div class="mb-4">

          <label for="username" class="inline-block mb-2 ml-1 font-semibold text-xs text-slate-700"> ایمیل :</label>
          {{ form.email }}

        </div>
        <div class="mb-4">

          <label for="username" class="inline-block mb-2 ml-1 font-semibold text-xs text-slate-700"> کد ملی :</label>
          {{ form.national_code }}
        </div>
       
    <div class="flex items-center pt-7 h-16">
          <span class="w-auto ml-2 font-semibold text-xs text-slate-700">
                  تغییر عکس 
                </span>
                <label for="dropzone-file" class="w-8/12 sm:w-1/3 flex flex-col items-center justify-center border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100">
                  <div class="flex flex-col items-center justify-center p-1">
                    <svg class="w-6 h-6 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
                      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"/>
                    </svg>
                  </div>
                  <input type="file" name="image" id="dropzone-file" class="hidden" accept="image/*" />
                  <p class="text-sm font-medium text-slate-700">آپلود تصویر</p>
                </label>


  {% comment %} <!--Delete Image-->
          {% if form.image.value %}
           <button type="button" name="image" value="true"
                  class="mt-1 mr-3  flex items-center justify-center w-10 h-10 rounded-full bg-red-100 hover:bg-red-200 transition-all border border-red-400 shadow-sm">
                  <svg class="w-5 h-5 text-red-600 hover:text-red-700 transition-colors" xmlns="http://www.w3.org/2000/svg"
                  fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M6 7h12M9 7V4h6v3M10 11v6m4-6v6M5 7h14l-1 13a2 2 0 01-2 2H8a2 2 0 01-2-2L5 7z" />
               </svg>
            </button>
            {% endif %} {% endcomment %}

            </div>
          </div> 
    <!--Save Change-->
            <span class="opacity-90">
            <button type="submit"
              class="edit-user-button px-7 py-2 text-center text-white bg-blue-500 hover:bg-blue-600 hover:shadow-lg transition-all duration-200 align-middle border-0 rounded-lg shadow-md text-sm">
              تغییر اطلاعات کاربری
            </button>
            </span>
            </div>
        </div>
      </div>
    </div>
  </div>
</form>
  <!-- FOOTER -->
  {% include 'includes/footer.html' %}
</body>

<!--DROPDOWNS FOR NAVBAR-->

<script src="https://unpkg.com/@themesberg/flowbite@1.1.1/dist/flowbite.bundle.js"></script>
<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.js" defer>
</script>

<!--MOBILE NAVBAR-->
<script src="{% static 'js/navbar.js' %}"></script>
<!-- SHOW MODAL SEARCH -->
<script src="{% static 'js/searchBox.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll(".edit-user-button").forEach(button => {
      button.addEventListener("click", function (e) {
        e.preventDefault();

        Swal.fire({
          title: 'تغییر اطلاعات',
          text: 'آیا از اعمال تغییرات مطمئن هستید؟',
          icon: 'warning',
          showCancelButton: true,
          confirmButtonText: 'بله، ذخیره شود',
          cancelButtonText: 'انصراف',
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          background: '#ffffff',
          showClass: {
            popup: 'animate__animated animate__fadeInDown'
          },
          hideClass: {
            popup: 'animate__animated animate__fadeOutUp'
          }
        }).then((result) => {
          if (result.isConfirmed) {
        
            document.getElementById('edit-user').submit();
          }
        });
      });
    });
  });

</script>


</html>