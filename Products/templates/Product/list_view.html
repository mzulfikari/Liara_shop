{% load static %}
{% load filters %}

<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>محصولات</title>

  <link rel="stylesheet" href="{% static 'css/output.css' %}" />
  <link rel="stylesheet" href="{% static 'css/font.css' %}">
  <link rel="stylesheet" href="{% static 'css/main.css' %}">
  <link rel="stylesheet" href="{% static 'css/rangeInput.css' %}">
</head>

<style>
  .btn-filter {
    background: linear-gradient(90deg, #3b82f6 0%, #2563eb 100%);
    color: #fff;
    font-weight: 500;
    font-size: 0.875rem;
    padding: 0.625rem 1.5rem;
    border-radius: 1rem;
    box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease-in-out;
    letter-spacing: 0.05em;
    cursor: pointer;
    border: none;
  }

  .btn-filter:hover {
    transform: scale(1.05);
    background: linear-gradient(90deg, #2563eb 0%, #1d4ed8 100%);
    box-shadow: 0 12px 20px rgba(0, 0, 0, 0.15);
  }

  .price-input {
    width: 80px;
    padding: 0.3rem 0.5rem;
    margin: 0 0.25rem;
    border: 1px solid #d1d5db;
    border-radius: 0.375rem;
  }

  .price-range {
    display: flex;
    justify-content: space-between;
    font-size: 0.75rem;
    margin-top: 0.5rem;
    color: #6b7280;
  }
</style>

<body class="bg-gray-50">
  <!-- NAVBAR -->
  <div>
    <!-- TOP -->
    {% include 'includes/head.html' %}
    <!-- OPACITY SCREEN FOR SEARCH INPUT FOCUS -->
    <div class="max-w-[1440px] mx-auto px-3">
      <div class="bg-white shadow-xl my-5 lg:my-10 rounded-xl md:rounded-2xl p-3 md:p-5">
        <div class="bg-white mx-5 rounded-2xl mb-4 grid">
          <div class="py-3">
            <h3 class="text-xl font-semibold text-gray-800"> محصولات</h3>
          </div>
        </div>
        <div class="md:flex">
          <div class="md:w-4/12 lg:w-3/12">
            <div class="bg-white mx-5 mb-4 px-3 py-3 border rounded-xl">
              <div>


                <div class="opacity-80 mb-1">
                  دسته بندی:
                </div>
                <form method="GET" id="category-filter-form">
                  {% for category in categories %}
                  <div class="flex items-center rounded-lg hover:bg-gray-100 opacity-80">
                    <input id="category-{{ category.id }}" type="checkbox" value="{{ category.id }}" name="category_id"
                      {% if category.id|stringformat:"s" in selected_categories %} checked {% endif %}
                      class="w-4 h-4 bg-gray-100 border-gray-300 mr-3">
                    <label for="category-{{ category.id }}"
                      class="w-full text-xs text-gray-900 rounded pr-1 py-2">{{ category.title }}</label>
                  </div>
                  {% endfor %}
              </div>
            </div>


            <div class="bg-white mx-5 mb-4 px-3 py-3 border rounded-xl">
              <div>
                <div class="opacity-80 mb-1">
                  برند:
                </div>
                <div class="space-y-1">
                  <div class="flex items-center rounded-lg hover:bg-gray-100 opacity-80">
                    <input id="checkbox-item-21" type="checkbox" value=""
                      class="w-4 h-4 bg-gray-100 border-gray-300 mr-3">
                    <label for="checkbox-item-21" class="w-full text-xs text-gray-900 rounded pr-1 py-2">سامسونگ</label>
                  </div>
                  <div class="flex items-center rounded-lg hover:bg-gray-100 opacity-80">
                    <input id="checkbox-item-22" type="checkbox" value=""
                      class="w-4 h-4 bg-gray-100 border-gray-300 mr-3">
                    <label for="checkbox-item-22" class="w-full text-xs text-gray-900 rounded pr-1 py-2">هوآوی</label>
                  </div>
                  <div class="flex items-center rounded-lg hover:bg-gray-100 opacity-80">
                    <input id="checkbox-item-23" type="checkbox" value=""
                      class="w-4 h-4 bg-gray-100 border-gray-300 mr-3">
                    <label for="checkbox-item-23" class="w-full text-xs text-gray-900 rounded pr-1 py-2">شیائومی</label>
                  </div>
                  <div class="flex items-center rounded-lg hover:bg-gray-100 opacity-80">
                    <input id="checkbox-item-24" type="checkbox" value=""
                      class="w-4 h-4 bg-gray-100 border-gray-300 mr-3">
                    <label for="checkbox-item-24" class="w-full text-xs text-gray-900 rounded pr-1 py-2">لنوو</label>
                  </div>
                  <div class="flex items-center rounded-lg hover:bg-gray-100 opacity-80">
                    <input id="checkbox-item-25" type="checkbox" value=""
                      class="w-4 h-4 bg-gray-100 border-gray-300 mr-3">
                    <label for="checkbox-item-25" class="w-full text-xs text-gray-900 rounded pr-1 py-2">سونی</label>
                  </div>
                </div>
              </div>
            </div>

            
            <div class="bg-white mx-5 mb-4 px-3 py-3 border rounded-xl">
              <div class="wrapper">
                <div class="price-input flex flex-col-reverse gap-y-3 text-sm opacity-80">
                  <div class="field">
                    <span>تا</span>
                    <input type="number" value="1000000">
                    <span>تومان</span>
                  </div>
                  <div class="field">
                    <span>از</span>
                    <input type="number" value="0">
                    <span>تومان</span>
                  </div>
                </div>
                <div class="slider">
                </div>
                <div class="range-input">
                  <input type="range" class="range-min" min="0" max="1000000" value="0" step="100">
                  <input type="range" class="range-max" min="0" max="1000000" value="1000000" step="100">
                </div>
                <div class="flex justify-between opacity-70 text-xs my-3">
                  <span>
                    ارزان ترین
                  </span>
                  <span>
                    گران ترین
                  </span>
                </div>
              </div>
            </div>

            <div class="space-y-1 text-left">
              <button type="submit" class="btn-filter" style="margin-right: 0.4rem;">
                اعمال فیلتر
              </button>
            </div>
            </form>

          </div>

          <div class="md:w-8/12 lg:w-9/12">
            <div class="bg-white mx-1 rounded-2xl grid place-items-center">
              <div class="w-full">
                <div class="py-3 border-b">
                  <div class="opacity-90 text-sm mb-2">
                    مرتب سازی:
                  </div>
                  <div class="flex flex-wrap gap-5 justify-start items-center">
                    <div class="opacity-70 text-xs hover:text-red-500 transition cursor-pointer text-red-600">
                      محبوب ترین
                    </div>
                    <div class="opacity-70 text-xs hover:text-red-500 transition cursor-pointer">
                      پرفروش ترین
                    </div>
                    <div class="opacity-70 text-xs hover:text-red-500 transition cursor-pointer">
                      ارزان ترین
                    </div>
                    <div class="opacity-70 text-xs hover:text-red-500 transition cursor-pointer">
                      گران ترین
                    </div>
                    <div class="opacity-70 text-xs hover:text-red-500 transition cursor-pointer">
                      جدیدترین
                    </div>
                    <div class="opacity-70 text-xs hover:text-red-500 transition cursor-pointer">
                      پربازدیدترین
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="bg-white rounded-2xl px-4 py-6">

              <div class="grid gap-4 sm:gap-6 md:gap-8 grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
                {% for object in object_list %}
                <div
                  class="border rounded-xl flex flex-col hover:shadow-lg transition-shadow duration-300 p-3 bg-white">
                  <a href="{% url 'Product:Product_details' slug=object.slug %}">

                    <div class="mb-4 w-full">
                      {% if object.image %}
                      <img
                        class="hover:scale-105 transition-transform duration-300 rounded-md sm:rounded-2xl w-full object-cover h-32 sm:h-40 md:h-48 lg:h-52"
                        src="{{ object.image.url }}" alt="{{ object.title }}" />
                      {% else %}
                      <img
                        class="hover:scale-105 transition-transform duration-300 rounded-md sm:rounded-2xl w-full object-cover h-32 sm:h-40 md:h-48 lg:h-52"
                        src="{% static 'image/logo.png' %}" alt="No Image" />
                      {% endif %}
                    </div>

                    <div class="flex flex-col items-center w-full text-center">
                      <h3
                        class="text-xs sm:text-sm md:text-base font-medium text-gray-800 mb-1 sm:mb-2 leading-5 sm:leading-6">
                        {{ object.title }}
                      </h3>
                      <span class="text-xs sm:text-sm text-gray-600">{{ object.price|rial_price }}</span>
                    </div>
                  </a>
                </div>
                {% endfor %}

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  </div>

  <div class="mb-10">
    <ul class="flex items-center justify-center gap-x-2 md:gap-x-3 h-8 text-sm">
      <li>
        {% if page_obj.has_previous%}
        <a href="?page={{ page_obj.previous_page_number }}"
          class="flex items-center justify-center transition shadow-lg px-3 h-8 ms-0 text-gray-500 bg-white rounded-lg hover:bg-gray-100">
          <svg class="w-2.5 h-2.5 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
            viewBox="0 0 6 10">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M5 1 1 5l4 4" />
          </svg>
        </a>
        {% endif %}
      </li>

      {{ page_obj.page_range }}
      {% for i in page_obj.paginator.page_range %}
      {% if page_obj.number == i %}
      <li>
        <a href="?page={{i}}"
          class="flex items-center justify-center transition shadow-lg px-3 h-8 text-red-600  bg-red-200 rounded-lg hover:bg-gray-100">{{i}}</a>
      </li>
      {% elif i > page_obj.number|add:'-3' and i < page_obj.number|add:'3' %}
      <li>
        <a href="?page={{i}}"
          class="flex items-center justify-center transition shadow-lg px-3 h-8 text-gray-500 bg-white rounded-lg hover:bg-gray-100">{{i}}</a>
      </li>
      {% endif %}
      {% endfor %}

      {% if page_obj.has_next %}
      <a href="?page={{page_obj.next_page_number}}"
        class="flex items-center justify-center transition shadow-lg px-3 h-8 text-gray-500 bg-white rounded-lg hover:bg-gray-100">
        <svg class="w-2.5 h-2.5 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
          viewBox="0 0 6 10">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="m1 9 4-4-4-4" />
        </svg>
      </a>
      {% endif %}
      </li>
    </ul>

  </div>
  </div>
  </div>
  <!-- FOOTER -->
  {% include 'includes/footer.html' %}

</body>
<!--DROPDOWNS FOR NAVBAR-->
<script src="https://unpkg.com/@themesberg/flowbite@1.1.1/dist/flowbite.bundle.js"></script>
<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.js" defer>
</script>
<!--MOBILE NAVBAR-->
<script src="{% static 'js/navbar.js' %}"></script>
<!-- SHOW MODAL SEARCH -->
<script src="{% static 'js/searchBox.js' %}"></script>
<!-- RANGE INPUT -->
<script src="{% static 'rangeinput.js' %}"></script>

